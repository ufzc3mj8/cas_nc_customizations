<!DOCTYPE html>
<html>
<!-- start right frame -->
<head>
<title>Student Contacts</title>
~[wc:commonscripts]
<link href="/images/css/screen.css" rel="stylesheet" media="screen">
<link href="/images/css/print.css" rel="stylesheet" media="print">
<style type="text/css">
.tlistCollectionTable button.editRow{
    width: 21px;
    height: 21px;
    padding: 0;
    margin-top: 0;
    margin-bottom: 0;
}
.tlistCollectionTable button.editRow em{
	background: url("/images/img/jquery/ui-icons_FFFFFF_256x240.png") no-repeat scroll -64px -112px transparent;
	display: inline-block;
	height: 16px;
	width: 16px;
	margin: 0;
	overflow: hidden;
}
.ui-dialog-titlebar-close {
  visibility: hidden;
}
</style>
</head>

<body>

<form action="/admin/students/modifydata.html" method="POST" id="mainForm">
~[wc:admin_header_frame_css]<!-- breadcrumb start --><a href="/admin/home.html" target="_top">~[text:psx.html.admin_students.modifydata.start_page]</a> &gt; <a href="home.html?selectstudent=nosearch" target="_top">~[text:psx.html.admin_students.modifydata.student_selection]</a> &gt; Student Contacts<!-- breadcrumb end -->~[wc:admin_navigation_frame_css]

~[wc:title_student_begin_css]Student Contacts~[wc:title_student_end_css]

<!-- start of content and bounding box -->
<div class="box-round" style="display: none" id="tableData">

~[tlist_child:STUDENTS.S_NC_CONTACTS.S_NC_CONTACTS;displaycols:CON_FIRSTNAME,CON_LASTNAME,CON_TYPE,CON_ADDRESS_1,CON_PHONE_1,CON_TYPE_1,CON_PHONE_2,CON_TYPE_2,CON_PHONE_3,CON_TYPE_3,CON_PHONE_4,CON_TYPE_4;fieldNames:First Name,Last Name,Contact Type,Address,Phone 1,Phone 1 Type,Phone 2,Phone 2 Type,Phone 3,Phone 3 Type,Phone 4,Phone 4 Type;type:html]

<div class="button-row"><input type="hidden" name="frn" value="~(studentfrn)"><input type="hidden" name="ac" value="prim">~[submitbutton]</div>
</div>
<br>

<!-- end of content of bounding box -->

~[wc:admin_footer_frame_css]
</form>

<div id="modalData"  style="display:none;" title="Edit Record">
    <form action="/admin/students/modifydata.html" method="POST" id="modalForm">
	<table id="modalTable">
	
	</table>
        <input type="hidden" name="ac" value="prim"><input type="hidden" name="frn" value="~(studentfrn)">
    </form>
	<p style ="float:right;margin-right:15px;">
		<button type="button" id="modalCancel">Cancel</button>
		<button type="button" id="modalSave">Save</button>
	</p>
</div>

<script type="text/javascript">
$j(document).ready(function(){
	var ddValues = {};
	ddValues['1']='Mother';
	ddValues['2']='Father';
	ddValues['3']='Step-parent';
	ddValues['4']='Grandparent';
	tlistText2DropDown('CON_TYPE',ddValues);
        
        // Hide table columns for easy viewing
        //$j('#tlistTable td:nth-child(3),th:nth-child(3)').hide();
        $j('#tlistTable td:nth-child(4),th:nth-child(4)').hide();
        $j('#tlistTable td:nth-child(5),th:nth-child(5)').hide();
        $j('#tlistTable td:nth-child(6),th:nth-child(6)').hide();
        $j('#tlistTable td:nth-child(7),th:nth-child(7)').hide();
        $j('#tlistTable td:nth-child(8),th:nth-child(8)').hide();
        $j('#tlistTable td:nth-child(9),th:nth-child(9)').hide();
        $j('#tlistTable td:nth-child(10),th:nth-child(10)').hide();
        $j('#tlistTable td:nth-child(11),th:nth-child(11)').hide();
        $j('#tlistTable td:nth-child(12),th:nth-child(12)').hide();
        
        // Add edit button for easy editing of entire record
        $j('.deleteCB').each( function(index, value) {
        	index++;
            $j(this).after('<button class="editRow" type="button" onClick="editRow('+index+')"><em>&nbsp\;</em></button>');
        });
        
        $j('#modalCancel').click(function(){
            $j('#modalData').dialog('close');
            $j('#modalTable').html('');
        });
        $j('#modalSave').click(function(){
            $j('#modalData').dialog('close');
            $j('#modalForm').submit();
        });
        
        var origAddButton=$j(":button:first-child").filter(function(index) { return $j(this).text() === "Add"; });
        origAddButton.click(function(){
	       alert("Got the stop"); 
        });

        $j('#addCont').click(function(){
	        alert("You got it!");
	        $j('#addButton').click();
        });
        
        $j('#tableData').show();
});

function editRow(rowNum){
    var tableRow=$j('#tlistTable > tbody > tr:eq('+rowNum+') > td');
    tableRow.each(function(i){
    	if(!($j("#tlistTable tr:eq("+rowNum+") td:eq("+i+") input").hasClass('deleteCB'))){
            rLabel=$j("#tlistTable th:eq("+i+")").text()
            rFieldVal=$j("#tlistTable tr:eq("+rowNum+") td:eq("+i+") input").val()
            rFieldHtml=$j("#tlistTable tr:eq("+rowNum+") td:eq("+i+")").html()
            rField=rFieldHtml
                $j('#modalTable').append('<tr><td>'+ rLabel +'</td><td>'+ rField +'</td></tr>');		    	
    	};
    });
    $j('#modalData').dialog({
        modal:true,
        show: {
          effect: "blind",
          duration: 500
        },
        hide: {
          effect: "blind",
          duration: 500
        }
    });
}


function tlistText2DropDown(fieldName,ddRows){
    var fqTD="#tlistTable > tbody > tr > #"+fieldName;
    $j(fqTD).each(function(x,TDHTML){
        var tdElement = $j(TDHTML);
        var input = tdElement.find("input");
        input.remove();
        var inputName = input.attr("name");
        var inputValue = input.attr("value");
        var select1 = document.createElement("select");
        select1.name=inputName;
        for(var ddRow in ddRows){
            var option1 = document.createElement("option");
            option1.value=ddRow;
            option1.text=ddRows[ddRow];
            if(ddRow==inputValue){
                option1.selected=true;
            }
            select1.options.add(option1);
        }
        tdElement.append(select1);
    });
}
</script>
</body>
</html><!-- end right frame -->